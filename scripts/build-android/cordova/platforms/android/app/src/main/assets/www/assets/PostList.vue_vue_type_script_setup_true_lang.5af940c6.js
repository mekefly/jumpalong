import{e as O}from"./event.e2dea496.js";import{_ as P}from"./PapawList.vue_vue_type_script_setup_true_lang.675ba8f6.js";import{f as R,bv as C,br as S,n as a,bn as z,y as d,I as v,C as s,H as y,G as h,z as D,O as j}from"./index.de60ca02.js";import{e as w}from"./Content.167969e1.js";import{u as F}from"./Scrollbar.12236074.js";import{_ as N}from"./RelayInfoView.e65832c0.js";import{_ as U}from"./Empty.316516f4.js";const V={key:0,class:"py-20 flex items-center justify-center"},q={key:1,class:"h-40 flex justify-center items-center"},J=R({__name:"PostList",props:{urls:null,pubkeys:null,filter:null,filters:null,pushEvent:null,active:{type:Boolean},disabledLoad:{type:Boolean},disabledEmpty:{type:Boolean},limit:null,reverseSort:{type:Boolean},disabledReply:{type:Boolean}},emits:["update:pushEvent"],setup(i,{expose:g,emit:b}){const m=i;logger.for("home.vue").for("PostList.vue").info("\u8FDB\u5165PostList.vue");const{pubkeys:o,filter:u,filters:r,urls:c,active:B}=C(m);S(),logger.for("home.vue").for("PostList.vue").debug("defineProps > pubkey:",o);const f=a(()=>{const e=r!=null&&r.value?[...r.value]:[];return u!=null&&u.value&&e.push(u.value),o!=null&&o.value&&e.push(...o.value.map(t=>({kinds:[1],authors:[t]}))),e}),L=a(()=>{var e;return[...(e=o==null?void 0:o.value)!=null?e:[],...f.value.map(t=>{var p;return(p=t.authors)!=null?p:[]}).flat(1)]}),l=a(()=>{const e={},t=w({filters:f.value,...e,addUrls:c==null?void 0:c.value,pubkeys:L.value,limit:m.limit});return m.reverseSort&&t.addStaffOfSortByCreateAt(),t}),E=F(l,B);z(()=>{var e;(e=l.value)==null||e.closeReq()});const n=a(()=>{var e;return(e=l.value)==null?void 0:e.getList()});b("update:pushEvent",e=>{var t;(t=l.value)==null||t.pushEvent(e)});const _=a(()=>{var e,t;return((e=l.value)==null?void 0:e.feat.loadBufferOpt.isLoading)||((t=l.value)==null?void 0:t.feat.refreshBufferOpt.isLoading)});return g({postEvents:n,...E}),(e,t)=>{const p=N,k=U;return d(),v("div",null,[!i.disabledLoad&&s(_)&&s(n)&&s(n).length===0?(d(),v("div",V,[y(p,{size:"medium"})])):!i.disabledEmpty&&!s(_)&&s(n)&&s(n).length===0?(d(),v("div",q,[y(k,{description:s(j)("empty_text"),size:"huge"},null,8,["description"])])):h("",!0),s(n)?(d(),D(P,{key:2,eventList:s(n),withPapawOptionsButtons:"",disabledReply:i.disabledReply,onEventDeletion:t[0]||(t[0]=x=>s(O)(x))},null,8,["eventList","disabledReply"])):h("",!0)])}}});export{J as _};
