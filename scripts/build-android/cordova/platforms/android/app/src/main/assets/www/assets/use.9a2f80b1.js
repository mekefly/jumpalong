import{am as B,ap as i,p as T,m as O,aw as b,C as w,n as h,aG as z,ar as K,a0 as M,aE as y,bn as _,bo as j,bp as F,X as g,a4 as H,a9 as P,au as U,bq as S,br as x,O as I,a1 as q,ac as G,aj as N,ad as X,aF as $,ai as k}from"./index.de60ca02.js";import{a as J}from"./autoAddRelayurlByEventIdStaff.73b12553.js";import{d as Q}from"./getCacheStaff.283a43f7.js";const A=Symbol("scrollbarInstKey"),R=new B.exports,re=t=>{const n={scrollbarInst:i(null),onScroll(e){R.on("scroll",e)},removeScrollListener(e){R.removeListener("scroll",e)},containerRef:t};return T(A,n),n},D=()=>O(A,()=>{},!0);function ue(t=500,n){var c;const e=i((c=n==null?void 0:n.active)!=null?c:!1),a=i(!1);let r=null;b(e,()=>{a.value=!0,clearTimeout(r),r=setTimeout(()=>{a.value=!1},w(t))});const u=h(()=>e.value||a.value),o=i(!1);z(()=>{if(!e.value){o.value=!1;return}setTimeout(()=>{o.value=!0},0)});function d(){e.value=!0}function s(){e.value=!1}return{show:d,hidden:s,active:e,transitionActive:o,safeActive:u,transitioning:a,duration:i(t)}}function oe(t){const[n,e]=V();return[h(()=>e.value?t():null),n,e]}function V(t,n){const e=i(n==null?void 0:n.target),a=i(!0),r=W(e,{delay:t,isListener:a,...n});let u=i(r.value);const o=b(r,()=>{r.value&&(u.value=!0,o(),a.value=!1)},{immediate:!0});return[e,u]}const[Y,Z]=ne(()=>({isIntoScreen:i(!1),active:i(!1)}));function W(t,n){var C,E;const e=K(n,{isListener:!0,componentTreeOptimization:!0,preloadDistance:500}),{isIntoScreen:a,active:r}=(C=Z())!=null?C:{},{isIntoScreen:u,active:o}=Y(),d=function(){var l,p;t.value&&((l=t.value)==null?void 0:l.getBoundingClientRect().y)<=window.innerHeight+e.preloadDistance&&((p=t.value)==null?void 0:p.getBoundingClientRect().bottom)>=0-e.preloadDistance?u.value=!0:u.value=!1},s=M(d,(E=n==null?void 0:n.delay)!=null?E:500);y(d),s(),y(c),_(f);try{j(c),F(f)}catch{}function c(){o.value=!0}function f(){o.value=!1}const m=D();z(()=>{var l;if(!o.value){v(),u.value=!1;return}if(!t.value){u.value=!1,v();return}if(!((n==null?void 0:n.componentTreeOptimization)&&((l=a==null?void 0:a.value)!=null?l:!0))){v();return}if(!w(e.isListener)){v();return}s(),L()});function L(){if(m){const l=m.containerRef.value;if(l){l.addEventListener("scroll",s,{passive:!0}),window.addEventListener("resize",s,{passive:!0});return}}window.addEventListener("mousewheel",s,{passive:!0}),window.addEventListener("resize",s,{passive:!0}),window.addEventListener("touchend",s,{passive:!0})}function v(){if(m){const l=m.containerRef.value;if(!l)return;l.removeEventListener("scroll",s)}window.removeEventListener("mousewheel",s),window.removeEventListener("resize",s),window.removeEventListener("touchend",s)}return u}function ie(t,n=g,e,a){const{urls:r=new Set}=a!=null?a:{},u=ee();return function(d){var m,L;d.kind=t;const s=(m=w(n))!=null?m:g,c=s.createChild(),f=c.publish(d,H(w(r),P.getWriteList()),{addUrl:!0,onOK:u});s.addExtends(c),f==null||f.tags.forEach(v=>{v[0]==="p"&&v[1]?c.addStaff(Q(v[1])):v[0]==="e"&&v[1]&&c.addStaff(J(v[1]))}),f&&((L=e==null?void 0:e.value)==null||L.call(e,f))}}function ce(t,n){const e=$();if(!e)throw new Error("\u53EA\u80FD\u5728setup\u91CC\u4F7F\u7528");const a=U(t,n),r=i(a.value);return b(a,()=>{r.value=a.value}),h({get(){return r.value},set(u){r.value=u,e.emit(`update:${n}`,u)}})}function le(t=.5625){const n=i(null);y(()=>{e()}),S(window,"resize",()=>{e()});function e(){!n.value||(n.value.style.height=n.value.scrollWidth*t+"px")}return[n]}function de(t){const n=i(!1);return setTimeout(()=>{n.value=!0},0),n}function ee(){const t=x();return function({ok:e,url:a}){e?t.success(I("published_to",{url:a})):t.error(I("not_published_to",{url:a}))}}function ve(t=1060,n=2650){const e=i(window.innerWidth);return S("resize",()=>{e.value=window.innerWidth}),function(r,u,o={}){return h(()=>{const{floor:d=!0}=o;if(e.value>n)return u;if(e.value<t)return r;{const s=(e.value-t)/(n-t),c=(u-r)*s+r;return d?Math.floor(c):c}})}}function fe(t){const n=i(0),e=h(()=>{const a=Math.abs(n.value);return a>=w(t)?0:(w(t)-a)/w(t)});return{shifting:n,moveScale:e,add(a){n.value+=a*e.value},remake(){n.value=0}}}function me(){return q("useNowSecondTimestamp",()=>{const t=i(k());let n;function e(){clearInterval(n),setTimeout(()=>{n=setInterval(()=>{t.value=k()},1e3)},Date.now()%1e3)}return e(),setInterval(e,1e3*60*5),t},{useLocalStorage:!1,duration:999999999999999})}function ne(t){const n=Symbol();return[(...e)=>{const a=t(...e);return T(n,a),a},()=>O(n,()=>null,!0)]}function we(t){const n=D();function e(){t.value=!1}b(t,()=>{var a;t.value&&((a=n==null?void 0:n.containerRef.value)==null||a.addEventListener("scroll",e,{once:!0,passive:!0}),document.addEventListener("mousedown",e,{once:!0,passive:!0}))})}function he(t,n,e){var u;const a={...G,...e!=null?e:{}},r=i((u=N("checkedKinds",a))!=null?u:n);return h({get(){return r.value},set(o){r.value=o,X("checkedKinds",o,a)}})}function Le(t,n){S(t,"mousedown",a,{passive:!0}),S(t,"touchstart",a,{passive:!0});const e=i(!1);function a(){u(),e.value=!0}let r;async function u(){const s=t.value;!s||(s.addEventListener("click",d,{once:!0}),s.addEventListener("mousemove",o,{once:!0,passive:!0}),s.addEventListener("touchmove",o,{once:!0,passive:!0}),s.addEventListener("touchcancel",o,{once:!0,passive:!0}),clearTimeout(r),r=setTimeout(()=>{o()},500))}function o(){e.value=!1}function d(){!e.value||(e.value=!1,n())}return{isPress:e}}export{fe as a,D as b,ne as c,re as d,ee as e,me as f,W as g,de as h,ie as i,V as j,ue as k,oe as l,ce as m,we as n,Le as o,le as p,he as q,ve as u};
